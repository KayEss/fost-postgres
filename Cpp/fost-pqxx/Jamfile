include $(TOP)/../fost-base/fost.jam ;
import path ;


lib libpq : : <name>pq ;


lib fost-pqxx
    :
        libpq
        [ path.glob $(TOP)/../PostgreSQL/pqxx/src/ : *.cxx ]
    :
        <define>PQXX_HAVE_BOOST_SMART_PTR
        <define>PQXXTR1=boost

        <target-os>darwin:<include>/usr/local/pgsql/include/
        <target-os>darwin:<include>/Library/PostgreSQL/9.1/include/

        <target-os>linux:<include>/usr/include/postgresql

        <toolset>clang:<cxxflags>-std=c++14
        <toolset>gcc:<cxxflags>-std=c++14
        $(REQUIREMENTS)

        <target-os>windows:<define>_CRT_SECURE_NO_WARNINGS
        <target-os>windows:<define>PQXX_SHARED
        <target-os>windows:<define>PQXX_INTERNAL
    ;

fost-install fost-pqxx ;
